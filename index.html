<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Touch Grass Predictor</title>
</head>
<body>
  <h2>上传图片识别是否摸草</h2>
  <input type="file" id="imageInput" accept="image/*">
  <button onclick="sendImage()">开始识别</button>
  <p id="result"></p>

  <script>
    async function sendImage() {
      const fileInput = document.getElementById('imageInput');
      const resultText = document.getElementById('result');
      if (!fileInput.files[0]) {
        alert("请先选择一张图片。");
        return;
      }

      const formData = new FormData();
      formData.append("file", fileInput.files[0]);

      try {
        const response = await fetch("http://localhost:8001/predict/", {

          method: "POST",
          body: formData
        });

        if (!response.ok) throw new Error("预测失败");

        const result = await response.json();
        resultText.textContent = `预测结果：${result.label}，置信度：${result.confidence}（模型：${result.model}）`;
      } catch (error) {
        resultText.textContent = "发生错误：" + error.message;
      }
    }
  </script>
</body>
</html>
